[platformio]
default_envs = esp32, native_test

[env:esp32]
platform = espressif32
board = esp32
framework = esphome
build_flags = -DUSE_ESP32

; ============================================
; Native Platform for Unit Tests (Linux/Mac/Windows)
; ============================================
[env:native_test]
platform = native

; Use Google Test framework
test_framework = googletest

; Build options for native tests
build_flags = 
    -std=c++17
    -Wall -Wextra -Werror
    -Wno-error=unused-variable
    -Wno-error=unused-parameter
    -O2

; Include directories for tests
includes = 
    test
    components
    components/esp_mesh

; Test sources
test_filter = test/test_mesh_logic.cpp

; Library dependencies for testing
lib_deps = 
    google/googletest

; Verbose output
verbose = verbose
